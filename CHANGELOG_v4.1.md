# Changelog v4.1

## 🚀 주요 변경 사항

### 1. 크롤링 안정성 대폭 개선
- **자동 레이아웃 감지**: 올리브영의 구형(Legacy) 레이아웃과 신형(New) 레이아웃을 자동으로 감지하여 적절한 크롤링 로직을 적용합니다.
- **JavaScript 강제 스크래핑**: Selenium의 `find_element`가 실패할 경우, JavaScript를 직접 실행하여 데이터를 강제로 추출하는 강력한 Fallback 메커니즘을 도입했습니다.
- **리뷰 탭/정렬 자동화**: 리뷰 탭 클릭과 최신순 정렬이 실패하지 않도록 JavaScript 레벨에서 이벤트를 직접 트리거합니다.

### 2. URL 처리 개선
- **URL 압축 및 정제**: 불필요한 파라미터를 제거하고 `goodsNo`만 남겨 URL을 깔끔하게 유지합니다.
- **프론트엔드 전처리**: 서버로 요청을 보내기 전에 프론트엔드에서 미리 URL을 압축하여 처리 효율을 높였습니다.

### 3. 히스토리 기능 강화
- **갤러리 뷰**: 텍스트 목록 대신 썸네일 중심의 갤러리 형태로 히스토리를 직관적으로 볼 수 있습니다.
- **상세 보기**: 히스토리 아이템 클릭 시 수집된 상세 정보(가격, 평점, 리뷰, 성분 등)와 이미지를 볼 수 있는 전용 뷰가 추가되었습니다.
- **선택 및 삭제**: 여러 항목을 선택하여 일괄 삭제하는 기능이 추가되었습니다.

### 4. AI 분석 기능 (Beta)
- **GPT-4o Mini / GPT-5 Mini 지원**: 수집된 리뷰와 이미지를 AI로 분석하여 요약 리포트를 생성하는 기능이 추가되었습니다.
- **설정 저장**: API 키와 모델 선택 상태가 저장됩니다.

### 5. 기타 개선 사항
- **이미지 병합 로직 최적화**: `conservative` 모드에서 불필요한 분할 없이 최대한 이미지를 병합하도록 로직을 수정했습니다 (65,000px 제한).
- **UI/UX 개선**: 버튼 아이콘 추가, 반응형 레이아웃 개선, 로딩 인디케이터 추가 등.

## 🐛 버그 수정
- 병렬 크롤러 실행 시 파라미터 불일치로 인한 오류 수정
- 이미지 저장 시 파일명 인코딩 문제 해결
- 일부 상품에서 리뷰 개수 및 평점을 0으로 가져오는 문제 해결
